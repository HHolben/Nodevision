<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resizable and Draggable Element</title>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #e0e0e0;
    }

    .box {
        width: 300px;
        height: 200px;
        border: 2px solid #333;
        background-color: #f0f0f0;
        position: absolute;
        cursor: default; /* Default cursor for the entire box */
        overflow: hidden;
        box-sizing: border-box;
    }

    .fullscreen-button, .close-button {
        position: absolute;
        top: 10px;
    }

    .fullscreen-button {
        right: 10px;
    }

    .close-button {
        left: 10px;
    }

    .box-content {
        position: relative;
        padding: 10px;
        height: calc(100% - 40px); /* Adjusted to account for buttons */
        box-sizing: border-box;
    }

    .resize-handle {
        width: 15px;
        height: 15px;
        background-color: #333;
        position: absolute;
        cursor: se-resize;
        bottom: 0;
        right: 0;
    }

    .drag-bar {
        width: 100%;
        height: 20px;
        background-color: #ddd;
        cursor: move;
    }
</style>
</head>
<body>

<script>
    class DraggableBox {
        constructor(id, heading, content, script) {
            this.id = id;
            this.heading = heading;
            this.content = content;
            this.script = script;
            this.createElement();
            this.makeResizableAndDraggable();
        }

        createElement() {
            const box = document.createElement('div');
            box.id = this.id;
            box.className = 'box';
            box.innerHTML = `
                <div class="drag-bar"></div>
                <div class="box-content">
                    <div class="fullscreen-button">
                        <button onclick="${this.id}.toggleFullscreen()">Full Screen</button>
                    </div>
                    <div class="close-button">
                        <button onclick="${this.id}.closeBox()">Close</button>
                    </div>
                    <h2>${this.heading}</h2>
                    <p>${this.content}</p>
                </div>
                <div class="resize-handle"></div>
            `;
            document.body.appendChild(box);
        }

        makeResizableAndDraggable() {
            const element = document.getElementById(this.id);
            const resizeHandle = element.querySelector('.resize-handle');
            const dragBar = element.querySelector('.drag-bar');
            let isResizing = false;
            let isDragging = false;
            let originalWidth = 0;
            let originalHeight = 0;
            let originalX = 0;
            let originalY = 0;
            let mouseX = 0;
            let mouseY = 0;

            resizeHandle.addEventListener('mousedown', (e) => {
                e.preventDefault();
                isResizing = true;
                originalWidth = element.offsetWidth;
                originalHeight = element.offsetHeight;
                mouseX = e.clientX;
                mouseY = e.clientY;
                document.addEventListener('mousemove', resize);
                document.addEventListener('mouseup', stopResize);
            });

            dragBar.addEventListener('mousedown', (e) => {
                e.preventDefault();
                isDragging = true;
                originalX = element.offsetLeft;
                originalY = element.offsetTop;
                mouseX = e.clientX;
                mouseY = e.clientY;
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
            });

            const resize = (e) => {
                if (isResizing) {
                    const width = originalWidth + (e.clientX - mouseX);
                    const height = originalHeight + (e.clientY - mouseY);
                    element.style.width = width + 'px';
                    element.style.height = height + 'px';
                }
            }

            const stopResize = () => {
                isResizing = false;
                document.removeEventListener('mousemove', resize);
                document.removeEventListener('mouseup', stopResize);
            }

            const drag = (e) => {
                if (isDragging) {
                    const deltaX = e.clientX - mouseX;
                    const deltaY = e.clientY - mouseY;
                    element.style.top = (originalY + deltaY) + 'px';
                    element.style.left = (originalX + deltaX) + 'px';
                }
            }

            const stopDrag = () => {
                isDragging = false;
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', stopDrag);
            }
        }

        toggleFullscreen() {
            const elem = document.getElementById(this.id);
            elem.classList.toggle("fullscreen");
            if (elem.classList.contains("fullscreen")) {
                elem.style.width = "100%";
                elem.style.height = "100%";
                elem.style.top = "0";
                elem.style.left = "0";
                elem.querySelector('.fullscreen-button button').textContent = "Exit Full Screen";
            } else {
                elem.style.width = "300px";
                elem.style.height = "200px";
                elem.style.top = "";
                elem.style.left = "";
                elem.querySelector('.fullscreen-button button').textContent = "Full Screen";
            }
        }

        closeBox() {
            const elem = document.getElementById(this.id);
            elem.style.display = "none";
        }
    }

    // Define your boxes here
    const boxes = [
        { id: 'box1', heading: 'Box 1', content: 'Content for Box 1', script: '' },
        { id: 'box2', heading: 'Box 2', content: 'Content for Box 2', script: '' },
        { id: 'box3', heading: 'Box 3', content: 'Content for Box 3', script: '' },
    ];

    // Create instances of DraggableBox
    boxes.forEach(box => {
        window[box.id] = new DraggableBox(box.id, box.heading, box.content, box.script);
    });
</script>

</body>
</html>
