<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nodevision Index</title>
    <link rel="stylesheet" href="NodeViewContainerStyles.css">
    <link rel="stylesheet" href="ToolbarStyles.css">
    <link rel="stylesheet" href="GraphStyles.css">
    <style>
        html, body {
            height: 100%; /* Ensure full height */
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
    </style>
    <!-- Include Libraries: -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js"></script>
    <script src="https://unpkg.com/cose-base/cose-base.js"></script>
    <script src="https://unpkg.com/cytoscape-fcose/cytoscape-fcose.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.29.2/cytoscape.min.js"></script>
    <!-- <script src="https://unpkg.com/cytoscape-elk/cytoscape-elk.js"></script> -->

    <!-- Include Nodevision Scripts -->
    <script src="GeneratedNodes.js" defer></script>
    <script src="GeneratedEdges.js" defer></script>
    <script src="GeneratedRegions.js" defer></script>
    <script src="Graph.js" defer></script>
</head>

<body>
    <div class="toolbar">
        <div class="dropdown">
            <button class="dropbtn">File</button>
            <div class="dropdown-content">
                <a href="#" onclick="runScript('NewNotebookPageInitializer.js')">New File</a>
                <br>
                <a href="#" onclick="runScript('File Script 2')">Script 2</a>
            </div>
        </div>
  
        <div class="dropdown">
            <button class="dropbtn">Edit</button>
            <div class="dropdown-content">
                <a href="#" onclick="runScript('Edit Script 1')">Script 1</a>
                <br>
                <a href="#" onclick="runScript('Edit Script 2')">Script 2</a>
            </div>
        </div>
  
        <div class="dropdown">
            <button class="dropbtn">View</button>
            <div class="dropdown-content">
                <a href="#" onclick="runScript('View Script 1')">Script 1</a>
                <br>
                <a href="#" onclick="runScript('View Script 2')">Script 2</a>
            </div>
        </div>

        <div class="dropdown">
            <button class="dropbtn">Settings</button>
            <div class="dropdown-content">
                <a href="#" onclick="runScript('Settings Script 1')">Script 1</a>
                <br>
                <a href="#" onclick="runScript('Settings Script 2')">Script 2</a>
            </div>
        </div>
    </div>

    <div class="container-wrapper">
        <div class="container container-left">
            <div id="content">
                <div id="cy"></div>
            </div>
        </div>
        <div class="divider" id="divider"></div>
        <div class="container container-right">
            <div id="info-panel">
                <div id="content-frame-container">
                    <iframe id="content-frame" style="height: 95%;"></iframe>
                </div>
            </div>
        </div>
    </div>

    <script>
        const divider = document.getElementById('divider');
        const containerLeft = divider.previousElementSibling;
        const containerRight = divider.nextElementSibling;
        const contentFrame = document.getElementById('content-frame');
        let isResizing = false;

        divider.addEventListener('mousedown', function (e) {
            isResizing = true;
            contentFrame.style.pointerEvents = 'none'; // Disable pointer events on iframe
        });

        document.addEventListener('mousemove', function (e) {
            if (!isResizing) return;
            let offsetRight = document.body.offsetWidth - (e.clientX - document.body.offsetLeft);
            containerLeft.style.width = `calc(100% - ${offsetRight}px)`;
            containerRight.style.width = `${offsetRight}px`;

            // Adjust iframe width as well
            let iframeWidth = containerRight.offsetWidth;
            contentFrame.style.width = `${iframeWidth}px`;
        });

        document.addEventListener('mouseup', function (e) {
            isResizing = false;
            contentFrame.style.pointerEvents = 'auto'; // Re-enable pointer events on iframe
        });

        function runScript(scriptName) {
            try {
                const script = document.createElement('script');
                script.src = scriptName;
                document.body.appendChild(script);
            } catch (error) {
                console.error(`Error running script ${scriptName}:`, error);
            }
        }
    </script>

</body>
</html>
