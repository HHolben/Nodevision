<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nodevision Index</title>
    <link rel="stylesheet" href="NodeViewContainerStyles.css">
    <link rel="stylesheet" href="ToolbarStyles.css">
    <link rel="stylesheet" href="GraphStyles.css">
    <link rel="stylesheet" href="MainStyles.css">
    <link rel="stylesheet" href="LayoutStyles.css">
    <link rel="stylesheet" href="style.css">

    <!-- Existing scripts and styles -->
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js" defer></script>
    <script type="text/javascript" defer src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="https://unpkg.com/layout-base/layout-base.js" defer></script>
    <script src="https://unpkg.com/cose-base/cose-base.js" defer></script>
    <script src="https://unpkg.com/cytoscape-fcose/cytoscape-fcose.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" defer></script>

    <!-- Include Nodevision Scripts -->
    <script src="GeneratedNodes.js" defer></script>
    <script src="GeneratedEdges.js" defer></script>
    <script src="GeneratedRegions.js" defer></script>
    <script src="Graph.js" defer></script>

    <!-- Include smaller scripts -->
    <script type="module" src="createToolbar.js" defer></script>
    <script type="module" src="boxManipulation.js" defer></script>
    <script type="module" src="resizeAndDrag.js" defer></script>
    <script type="module" src="main.js" defer></script>
</head>
<body>
    <!-- Button to edit code with dynamic ActiveNode -->
    <button id="editCodeButton">Edit Code</button>

    <script>
        // Set ActiveNode dynamically, for example based on some logic in your app
        window.ActiveNode = 'defaultNode'; // This should be set dynamically

        // Handle button click to navigate to the code editor
        document.getElementById('editCodeButton').addEventListener('click', function() {
            if (window.ActiveNode !== undefined) {
                const url = `CodeEditor.html?activeNode=${encodeURIComponent(window.ActiveNode)}`;
                window.location.href = url;
            } else {
                console.error('ActiveNode is not defined.');
            }
        });
    </script>

    <div class="toolbar"></div>
    <div class="container-wrapper">
        <div class="container container-left">
            <div id="content">
                <div id="cy"></div>
            </div>
        </div>
        <div class="divider" id="divider"></div>
        <div class="container container-right">
            <div id="element-info"></div>
            <div id="info-panel">
                <div id="content-frame-container">
                    <iframe id="content-frame" width="100%" height="100%" style="height: 95%;"></iframe>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
